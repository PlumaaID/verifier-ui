"use client";
import { useCallback, useEffect, useState } from "react";
import { Dropzone } from "~/components/dropzone";
import {
  SignatureRequestProof as SignatureRequest,
  SignatureProof as Signature,
  isSignatureProof,
  isSignatureRequestProof,
} from "@plumaa/verifier";
import { Button } from "~/components/ui/button";

const ProofReader = () => {
  const [files, setFiles] = useState<File[]>([]);
  const [proof, setProof] = useState<any | null>(null);

  const proofCallback = useCallback(async () => {
    if (files.length === 0) return null;
    const [file] = files;
    const arrayBuffer = await file.arrayBuffer();
    setProof(JSON.parse(Buffer.from(arrayBuffer).toString("latin1")));
  }, [files]);

  const setTestProof = () => {
    setProof(
      JSON.parse(
        '{"name":"Manifiesto | Plumaa ID","algorithm":"SHA256","mediatype":"text/plain","raw":"UG9yIGHDsW9zLCAqKk3DqXhpY28gaGEgZXZvbHVjaW9uYWRvIHLDoXBpZGFtZW50ZSBkZSBmb3JtYSB0ZWNub2zDs2dpY2EgZW4gZWwgZGVyZWNobyB5IGxhcyBmaW5hbnphcyoqLiBBIHRyYXbDqXMgZGUgbGEgZXZvbHVjacOzbiBkZSBlc3RvcyBzZWN0b3JlcywgaGVtb3Mgc2lkbyBjYXBhY2VzIGRlIGNyZWFyIG51ZXZvcyBwcm9kdWN0b3MgeSBzZXJ2aWNpb3MgcXVlIGNvbXBpdGVuIHNpZ25pZmljYXRpdmFtZW50ZSBjb250cmEgbGEgX2JhbmNhIHRyYWRpY2lvbmFsXyB5IGxvcyBfc2VydmljaW9zIGd1YmVybmFtZW50YWxlc18uCgpDb250cmFzdGFuZG8sIGxhIGlkZW50aWRhZCBzZSBoYSBjb252ZXJ0aWRvIGVuIHVuIGFjdGl2byBkaWdpdGFsIGVuIHPDrSBtaXNtbywgcHVlcyBzZSBoYSBkZW1vc3RyYWRvIHJlcGV0aWRhbWVudGUgcXVlIGxhICoqaW50ZWxpZ2VuY2lhIGFydGlmaWNpYWwqKiB5IGxhICoqYXV0b21hdGl6YWNpw7NuIGVuIGxhIGdlbmVyYWNpw7NuIGRlIGNvbnRlbmlkbyoqIGhhbiBwbGFnYWRvIGFsIGludGVybmV0IGNvbiBjb250ZW5pZG8gdmFjw61vIHkgZGV0ZXJpb3JhZG8gbnVlc3RyYSBjYXBhY2lkYWQgcGFyYSBkaXNjZXJuaXIgZW50cmUgZnVlbnRlcyBjb25maWFibGVzIGRlIGluZm9ybWFjacOzbi4KCkVuIGVzdGUgY29udGV4dG8sIGxhICoqc2VndXJpZGFkIHkgbGEgcHJldmVuY2nDs24gZGUgZnJhdWRlKiogaGFuIHRvbWFkbyByZWxldmFuY2lhLCBkYW5kbyBhcGVydHVyYSBhIHVuYSBzZXJpZSBkZSBzZXJ2aWNpb3MgZGlnaXRhbGVzIHF1ZSBidXNjYW4gZ2FyYW50aXphciBsYSBfaW50ZWdyaWRhZCBkZSBsYSBpbmZvcm1hY2nDs25fIHkgbGEgX2lkZW50aWRhZF8gZGUgbG9zIHVzdWFyaW9zIGEgdHJhdsOpcyBkZSBkaXZlcnNvcyBtw6l0b2RvcyBkZSBhdXRlbnRpY2FjacOzbiBxdWUgZGlmaWN1bHRhbiBsYSBmbHVpZGEgaW50ZWdyYWNpw7NuIGRlIHNlcnZpY2lvcyBkaWdpdGFsZXMuCgpTb3JwcmVzaXZhbWVudGUsIGRlc2RlIGxhIHB1YmxpY2FjacOzbiBkZSBsYXMgRGlzcG9zaWNpb25lcyBHZW5lcmFsZXMgZGUgTGEgTGV5IGRlIEZpcm1hIEVsZWN0csOzbmljYSBBdmFuemFkYSBlbiAyMDE0LCBNw6l4aWNvIGN1ZW50YSBjb24gaW5mcmFlc3RydWN0dXJhIHRlY25vbMOzZ2ljYSBhYmllcnRhIHBhcmEgbGEgdmVyaWZpY2FjacOzbiBkZSBpZGVudGlkYWQgdXRpbGl6YW5kbyB0ZWNub2xvZ8OtYXMgZGUgKipjcmlwdG9ncmFmw61hIGF2YW56YWRhKiogeSBhbCBhbGNhbmNlIGRlIG3DoXMgZGUgKioyMiBtaWxsb25lcyBkZSBwZXJzb25hcyBmw61zaWNhcyoqIHkgKioyIG1pbGxvbmVzIGRlIHBlcnNvbmFzIG1vcmFsZXMqKiBncmFjaWFzIGEgbG9zIGVzZnVlcnpvcyBkZSBkaWdpdGFsaXphY2nDs24gZGVsICoqU2VydmljaW8gZGUgQWRtaW5pc3RyYWNpw7NuIFRyaWJ1dGFyaWEqKiAoU0FUKS4KClBvciBlbCBjb250cmFyaW8sIGxvcyBzZXJ2aWNpb3MgZGUgdmVyaWZpY2FjacOzbiBkZSBpZGVudGlkYWQgaW50ZWdyYWRvcyBlbiBsb3Mgc2VydmljaW9zIGxlZ2FsZXMgeSBmaW5hbmNpZXJvcyBzZSBoYW4gZW5mb2NhZG8gZW4gcmVwbGljYXIgbGFzIGNhcmFjdGVyw61zdGljYXMgZGUgbGEgdmVyaWZpY2FjacOzbiBkZSBpZGVudGlkYWQgZW4gZWwgbXVuZG8gZsOtc2ljbzsgKipnZW9sb2NhbGl6YWNpw7NuKiosICoqcmVjb25vY2ltaWVudG8gZmFjaWFsKiogeSAqKmZvdG9ncmFmw61hIGRlIGlkZW50aWZpY2FjacOzbiBvZmljaWFsKiogc29uIGxvcyBtw6l0b2RvcyBtw6FzIGNvbXVuZXMgcGFyYSB2ZXJpZmljYXIgbGEgaWRlbnRpZGFkIGRlIHVuIHVzdWFyaW8uIEVzdG9zIG1pc21vcyBzaWVuZG8gdnVsbmVyYWJsZXMgYSBsYSBwbG9yaWZlcmFjacOzbiBkZSBfZGVlcGZha2VzXyB5IF9ib3RzXy4KCkVuIFBsdW1hYSBJRCB0b21hbW9zIHVuIGVuZm9xdWUgZGlzdGludG8uIEVzdGFtb3MgY29udmVuY2lkb3MgZGUgcXVlIGxhIGNyaXB0b2dyYWbDrWEgZGV0csOhcyBkZSBsYSBmaXJtYSBlbGVjdHLDs25pY2EgYXZhbnphZGEgZXMgbGEgcGllemEgY2xhdmUgcGFyYSBpbXB1bHNhciBsYSAqKmlkZW50aWRhZCBkaWdpdGFsKiogZW4gTcOpeGljbywgYnJpbmRhbmRvIG1heW9yIHNlZ3VyaWRhZCB5IHRyYW5zcGFyZW5jaWEgYSBsb3Mgc2VydmljaW9zIGRpZ2l0YWxlcywgcHJvY3VyYW5kbyBsYSAqKnNvYmVyYW7DrWEgeSBwcml2YWNpZGFkKiogZGUgbG9zIGRhdG9zIGRlIGxvcyB1c3VhcmlvcywgZSAqKmluY3JlbWVudGFuZG8gbGEgY29tcGV0aXRpdmlkYWQqKiBkZSBsYXMgZW1wcmVzYXMgbWV4aWNhbmFzIGJyaW5kYW5kbyBzZWd1cmlkYWQganVyw61kaWNhIHkgbGlxdWlkZXogYSBsb3MgbWVyY2Fkb3MuCgpOdWVzdHJhIG1pc2nDs24gZXMgY2xhcmE6ICoqZmFjaWxpdGFyIGVsIGFjY2VzbyBhIGxhIGVjb25vbcOtYSBhYmllcnRhIHkgbGFzIGZpbmFuemFzIGRlc2NlbnRyYWxpemFkYXMqKiBhIHRyYXbDqXMgZGUgbGEgaWRlbnRpZGFkIGRpZ2l0YWwuIENvbiBlbGxvLCBjb250cmlidWltb3MgYSBtZWpvcmFyIGxhIHNvYmVyYW7DrWEgeSBsaWJlcnRhZCBlY29uw7NtaWNhIGRlIGluZGl2aWR1b3MgeSBvcmdhbml6YWNpb25lcy4K","hash":"0x46d4645be7c983f7338316d81830ba88092543ec95d3974492494167f49e9a39","conservation":{"nom151":{"provider":"CINCEL"},"merkleized":{"merkleRoot":"bc08bd06baf9f0681c9ef9a7a4705b3770bdeba96a50d73141b733401f1cd035","merkleProof":["44c23dd3c28a4f0b29cb25173991ed8b8c755c08691dcd7d8847316d1890f83b","67b992e086b76617042dca52b8fc25738ec83fa195d53ff25bbe1dd156d448ea","489011c2ae36a8070536820a91b577221e69251adb56e4942764fd3e37ccfea4","5db9d67235d1d3212b9ca5d0a4719923ed5c16506ef05f102e81557178cd5866","78ab3f2242b781c694d0bd313aa0b76cb0ea7f7c36812e721a5c1597619e8735","08bb02457750e11310096135eabc07e7a3f0cd0296b221904e7106b1170745a3","f4d6ae1b56bfb5e23886db54df784235fa8eeb5418f5dc5f3c7b9a7a046bfdc0"],"conservation":{"provider":"CINCEL"},"algorithm":"SHA256"},"witnessCo":{"timestamp":"2024-08-12T02:06:32.000Z","leafIndex":29524982,"leftHashes":["fd663a79b001aa5bcd55ce32aae934fc69281bc19b83f287236b572acaf57962","44b18b19f7da0a75ea66af7fa9cdd3e5f376749ff3c201beaa867abfbd99270d","b52cfafbe335afc9eb38b74b1b9186c5426807985b99ecc568c338ed22f6d739","7eeeae2099b70c5535e56591708e41c3d1c6ef4ad4712b9ac10b234abf3595fb","7ec66133b1593e4e0fb1487bc57dd4f5c3fe5ba96f06dd155635e4e4f5ea0090","292f13b81d47665b32a49118c8fdf0f8842a1a7ed3529c16a3eb816c9afd6f10","9eead4dd688d58c92805d964422b82d4dba916135bd53999c138436539754d93","f17fefd4ec17ed9509a19d385eabe97b3daf9363f7721ac73692549a89dc0c3e","7c72988714cf7f1a443f426a5fef8fd59d3f0b6e55f1c0ce6c514e696efb4acd","49ca3fb0a0f25c91fa383bbb3e11a1fb6841a34f3335af6489e9f2d916f600bb","18ad218b723063f7a2e03be0c223e0d549b6cb5e83bbb6637693793056f2b7c7","70025291894cdb6d026106750a4428d6c83a34cf8aba58d5c485f32c652b7e7a","191773019eb72f846d8ae06c471d4f311da7dfbc5684eabce5ab07a3a7cd4822"],"rightHashes":["a4e1f62216f5114b37fe1813a8c90aacc0d16c6037afb64f12fc3ca477485ff0","2485174df7b3be480c84645a9392eba405084190bec9b7bfef9fcb5de8c2bff5","804190df90d142b2e2f3f8817e939e2161ea7d70b3dae131db2716b24294da97","568abd2b52091509db852a84dca9ed73e9d0f26c68c60832d846207826d2377c","0eadc73055bd08c98b2442673fc49b14b6d53f50cf32fad93208f66f85c600d9","d50abda8c243aaec7327da4d06e4406900e1a4044c78cf16c8795eea7bf10f22","f1784325e59f35fbced462a85232aa0ee9af6f90bf2dd10aa47699730c715f45","4e4944299da4013a0c048dd38c0361f2f2f933abfd16a870cafd341fbf482b87","bc2c9d1fc1562da7a4e2681792362bfc1595b37b7858b08ab94dedf449730207","5a6fe73dda8e3fa261090417acaaa13cbba3fd201eeaf9a4024174f151ce6c43","7a6657f3d5dbca92cb1fb9fb6c78d5591db7d8bf19c7edb3c481b46db98bf673","0ce03e1e5b653456cdad54f60c3bbb2a72a5b5642c2b6594b2575376382c12cf","d9ae4c66b98d0509e82ab2033e55d0cdcb5d57d9d80ac3b217d2d2971c5c3da6","1aed949c35b31d1636c6838cb7a0e348d47e9357906dd78d679149bb03375956","ad8e42087d2adef71fc3e930b8670744474f1aba2d5fbd25e6248cdc699b5cf2","8a5e3590429dbbf4174d07c1a3f1c0de297e2213885782857a80c0bed4753eaa","b30bd8d8485c721a8cf4ef72de8da37ef4daec4356be158d12b3c153e472cae7","690d72692e55b41f6eef9338ea7611908050941ed8d9282d90373b41908b7e6f"],"targetRootHash":"1c7fd124bbdf424ca53dc448b5134e0df31aa04dab8735f3bc910edb0a479975"}},"signatures":[{"hash":"46d4645be7c983f7338316d81830ba88092543ec95d3974492494167f49e9a39","signatureHash":"0xd4bd074e3dfc2925be69d63adb47b2327034b226d2f6f1e4f2e98c32d8c2a471","conservation":{"merkleized":{"merkleRoot":"bc08bd06baf9f0681c9ef9a7a4705b3770bdeba96a50d73141b733401f1cd035","merkleProof":["1fe433506a425c2d9abcbdda0e603d2243646a22036728047619d7d59233b1d6","f2a9ca214d28a423e005d9aa34c782fe35221da1ceb12aa2f442bf8daf1bd054","e422c2f8c8cf19811d52a0960d7f8bd6c056cc7ab41753f0ee2fb2d5af796106","712bcbcb7f88be3b89f261f4d1ea692e3115eb6ef7eb2bbb45d130f9faed4d3e","0abb97d9e6e31062f5b1d3f84e4174af72903ef3f68f797a6154ad9812fb166c","08bb02457750e11310096135eabc07e7a3f0cd0296b221904e7106b1170745a3","f4d6ae1b56bfb5e23886db54df784235fa8eeb5418f5dc5f3c7b9a7a046bfdc0"],"conservation":{"provider":"CINCEL"},"algorithm":"SHA256"},"witnessCo":{"timestamp":"2024-08-12T02:06:32.000Z","leafIndex":29524994,"leftHashes":["fd663a79b001aa5bcd55ce32aae934fc69281bc19b83f287236b572acaf57962","44b18b19f7da0a75ea66af7fa9cdd3e5f376749ff3c201beaa867abfbd99270d","b52cfafbe335afc9eb38b74b1b9186c5426807985b99ecc568c338ed22f6d739","7eeeae2099b70c5535e56591708e41c3d1c6ef4ad4712b9ac10b234abf3595fb","7ec66133b1593e4e0fb1487bc57dd4f5c3fe5ba96f06dd155635e4e4f5ea0090","7de1a117c4482ea9cf82da824400b02a40b266359f81b4a04e29f2cb08898247","5ff42cc6827256045e9a86dc3179794949c1eee08a85823bd7b869c29f253f77"],"rightHashes":["20cf90b246a030a95c67c429c8b533b5fc21baf15745a623948cfd3dd07daa03","875bd8631b3af1faad4a35b23f56741192dad8318d795a3530c77624f0452cbf","684912506fd261a7d7a70e0e7db95a0709da4e6dcd480aee881c14bf788e916e","c405c93e2087c0793ca1708991a3fa4fbfa75fc4a0e966e01d5a4060a2b9077f","caafc01d3dbf07c39177f2d3647c4f730537d81e946d7ebb674a769e7029b563","95e944955f9d8259c3d38483555f4510bc6065cc0eb248fc94f68cd487ea003a","8e31050e696c4380abae363787ac38b128af03f373eb1e34cf91c649a345bdcf","309b35bbd045acf6cb5b6937c8b72536398df61c508138aaf9cbd1d314721183","143f44b3c0af111a42f6a4996966e497178431783a5c597c5293190cebfad638","568abd2b52091509db852a84dca9ed73e9d0f26c68c60832d846207826d2377c","0eadc73055bd08c98b2442673fc49b14b6d53f50cf32fad93208f66f85c600d9","d50abda8c243aaec7327da4d06e4406900e1a4044c78cf16c8795eea7bf10f22","f1784325e59f35fbced462a85232aa0ee9af6f90bf2dd10aa47699730c715f45","4e4944299da4013a0c048dd38c0361f2f2f933abfd16a870cafd341fbf482b87","bc2c9d1fc1562da7a4e2681792362bfc1595b37b7858b08ab94dedf449730207","5a6fe73dda8e3fa261090417acaaa13cbba3fd201eeaf9a4024174f151ce6c43","7a6657f3d5dbca92cb1fb9fb6c78d5591db7d8bf19c7edb3c481b46db98bf673","0ce03e1e5b653456cdad54f60c3bbb2a72a5b5642c2b6594b2575376382c12cf","d9ae4c66b98d0509e82ab2033e55d0cdcb5d57d9d80ac3b217d2d2971c5c3da6","1aed949c35b31d1636c6838cb7a0e348d47e9357906dd78d679149bb03375956","ad8e42087d2adef71fc3e930b8670744474f1aba2d5fbd25e6248cdc699b5cf2","8a5e3590429dbbf4174d07c1a3f1c0de297e2213885782857a80c0bed4753eaa","b30bd8d8485c721a8cf4ef72de8da37ef4daec4356be158d12b3c153e472cae7","690d72692e55b41f6eef9338ea7611908050941ed8d9282d90373b41908b7e6f"],"targetRootHash":"1c7fd124bbdf424ca53dc448b5134e0df31aa04dab8735f3bc910edb0a479975"}},"signature":"GvTywfQZeY60uU5SK9e3G/dmmj+bjkrS5FkuGtBN0TolZgWhnAy8ocGNdM0vTqw/9U1sSIcXwauPoG34EFy5+JTWh2sgVeJUTRicvRHE284Y16Up6dCksBlJ2CFw2ckPtNG90kaoJ4j8Bb7DMLGbtNiGSCzht9DeIZlo8PG9qCl81dR0YzNz00AafwIny3RGoIRXnC/Ho1QpvoP2TEZUp84sJ1kCdQcvWvNZYz1JALgmBizqWMA8WGadZG6mmuL5FOCxX8Olaa5UIvJWnGIKzpelwysQc6QAm8gtcCfmvGDnxxR44SwbGyIFeN+bvaycMhLYZaBGF77OC/gR4Pu5WQ==","ocspResponse":"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","certificate":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlHUmpDQ0JDNmdBd0lCQWdJVU1EQXdNREV3TURBd01EQTNNRGMxTXpnd05URXdEUVlKS29aSWh2Y05BUUVMDQpCUUF3Z2dHVk1UVXdNd1lEVlFRRERDeEJReUJFUlV3Z1UwVlNWa2xEU1U4Z1JFVWdRVVJOU1U1SlUxUlNRVU5KDQpUMDRnVkZKSlFsVlVRVkpKUVRFdU1Dd0dBMVVFQ2d3bFUwVlNWa2xEU1U4Z1JFVWdRVVJOU1U1SlUxUlNRVU5KDQpUMDRnVkZKSlFsVlVRVkpKUVRFYU1CZ0dBMVVFQ3d3UlUwRlVMVWxGVXlCQmRYUm9iM0pwZEhreE1qQXdCZ2txDQpoa2lHOXcwQkNRRVdJM05sY25acFkybHZjMkZzWTI5dWRISnBZblY1Wlc1MFpVQnpZWFF1WjI5aUxtMTRNU1l3DQpKQVlEVlFRSkRCMUJkaTRnU0dsa1lXeG5ieUEzTnl3Z1EyOXNMaUJIZFdWeWNtVnliekVPTUF3R0ExVUVFUXdGDQpNRFl6TURBeEN6QUpCZ05WQkFZVEFrMVlNUTB3Q3dZRFZRUUlEQVJEUkUxWU1STXdFUVlEVlFRSERBcERWVUZWDQpTRlJGVFU5RE1SVXdFd1lEVlFRdEV3eFRRVlE1TnpBM01ERk9Uak14WERCYUJna3Foa2lHOXcwQkNRSVRUWEpsDQpjM0J2Ym5OaFlteGxPaUJCUkUxSlRrbFRWRkpCUTBsUFRpQkRSVTVVVWtGTUlFUkZJRk5GVWxaSlEwbFBVeUJVDQpVa2xDVlZSQlVrbFBVeUJCVENCRFQwNVVVa2xDVlZsRlRsUkZNQjRYRFRJME1EVXlOVEF3TkRrd05Gb1hEVEk0DQpNRFV5TlRBd05EazBORm93Z2RFeEhEQWFCZ05WQkFNVEUxQk1WVTFCUVNCSlJDQlRRVk1nUkVVZ1ExWXhIREFhDQpCZ05WQkNrVEUxQk1WVTFCUVNCSlJDQlRRVk1nUkVVZ1ExWXhIREFhQmdOVkJBb1RFMUJNVlUxQlFTQkpSQ0JUDQpRVk1nUkVVZ1ExWXhDekFKQmdOVkJBWVRBazFZTVNFd0h3WUpLb1pJaHZjTkFRa0JGaEp6YjJOcFpXUmhaRUJ3DQpiSFZ0WVdFdWFXOHhKVEFqQmdOVkJDMFRIRkJKUkRJME1EVXlORGRDTmlBdklFZEJUa281TnpFeU1USk9OVFF4DQpIakFjQmdOVkJBVVRGU0F2SUVkQlRrbzVOekV5TVRKSVJFZFNWbE13TWpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCDQpCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFMcUU1bU9DUVJYenNDTURCRGp0eDV6b05YMmc3UTBmUTJ1WlRGbFZUNXhGDQpSZjJuT29tQWVOODZ3MkhTYjlEWmlwZm1rTmJHS2ZXWXdsbnZvUVZqclpkUkVvTUgwVXptbUkzNmh4dTlBcmprDQpyTElsZWFJd1FjMmVRSkVQSWhZWHlkcnQ3ekQ0bjBiTlp5UURUbk5Za2lmVWJpV1lhcDV5WlBJa2hLb2FtMHJRDQpLR3dib29wT3RBVllWZHg5anFlQVdhZlhTVXAvdXJzTDJJVk9PdERYSVpTNWNCUGtkcWRhUkVCUGpNSk5MaGg4DQplZDZleVNwRDYzSUNTNUVzVGVPbkxMbWJpK0hmRVJFTW1rUUJqdnorU3pSUU1hc3JjeHRJS2VEZVFNR2g5WTh6DQoycW5iL0dwR1FvSWlsTDFzVnFoUVN2ZTREa3Fudk9kVE9ZeHpnQWJHbjZFQ0F3RUFBYU5QTUUwd0RBWURWUjBUDQpBUUgvQkFJd0FEQUxCZ05WSFE4RUJBTUNBOWd3RVFZSllJWklBWWI0UWdFQkJBUURBZ1dnTUIwR0ExVWRKUVFXDQpNQlFHQ0NzR0FRVUZCd01FQmdnckJnRUZCUWNEQWpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQVZvSWxGWEpCDQpLQ0lpaFZKdEFMZEVsYll6dUl6aitlOW5SVkR0bnJKUkp3SzBsUjlmTXNnVzZjVTlydkZyM3daSUhwVE9JOENHDQpPbTFPT1hyaStiWUNiQm0ybnZIbC9zYzZzZG5WbTZ4cmJ4WlM2S3FLRGhqWlA2M01KOVBlY2U3SzVxQzBQSDZJDQpUdnlIRjUzUGpYMy9KdzBVWldxV0FZMkowejdSV0VIZDNoU25wcWlnSHRzTzFMOFZGWFBVU0pTWUhTTytoNitrDQpyKzNVa1FEZERFeERReDE4NHJ4ZlhTN25BVU9zUXFqcEJlZlJRTDRaMU9EdmlBL3Z0bDRSZGgzTjRLOUR6YUhXDQpXRG5ESDU2U2lzandXVU9nQ0VWOUs1VWFRMzZ6TGNGK3VNTEF0UG1LN1o3YVFuV3dCUkR3WGtYS1FiZ0liaW8zDQp2NVJFZWM1Z3RZRDhRN0FsUUhoMGpOSTFCRGsrdnNDNk9PNHhYOWprNGpvcFdnNS91WllBK2hULy9RQ1JYSktUDQplNU1UYWN2YTZjcDNaeGlObktsbGpsd29SZzR1d0svTmVjbkJzTGhUK1BFSjlKY2o1RzVjcmF1TlA2TVlWQjk4DQpKQW5sU3pkZnFxeDJpb2NCRVJEUVJRUGRUU000ejIyN1VSdGEyTmZDcEU2bjB1U1JtMEF2QVVLS0RheCtKTE5nDQpyMlJleWVBYUdlZzU0TXR2c3QrOC9IOXlLOXk3L3l4UzRwckt3UGVYcGZEYTczakI4b3NzU2I4eFNBbW54QzZODQpFVjZGQjI3SzErdkE3dHhscVMxV3pzUmk4eXBlTGVpcGxIVEszcGE3RjV2VjY4UEhMeG4yUVJaZUs4VmlyWllaDQpkS3pHU0pWWHFwYlF6QlBIZkxYeGVGcEpMTXNNM3ZuMHFKYz0NCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0NCg=="}]}'
      )
    );
  };

  useEffect(() => {
    proofCallback();
  }, [proofCallback]);

  if (proof) {
    let content;
    if (isSignatureRequestProof(proof))
      content = <SignatureRequest proof={proof} />;
    else if (isSignatureProof(proof)) content = <Signature proof={proof} />;

    return (
      <div>
        <div className="flex mb-4">
          <h1 className="font-bold tracking-tight text-3xl">
            Resultado de la verificación
          </h1>
        </div>
        <div>{content}</div>
      </div>
    );
  }

  return (
    <>
      <h1 className="font-bold tracking-tight text-3xl">
        Verificador electrónico
      </h1>
      <p className="mt-3">
        Esta aplicación permite verificar las propiedades informáticas de
        documentos electrónicos que han sido producidos con tecnología de firma
        electrónica de{" "}
        <a
          href="https://plumaa.id"
          className="font-medium text-primary underline underline-offset-4"
        >
          Plumaa ID.
        </a>
      </p>
      <p className="mt-3">
        Esta aplicación es de código abierto, por lo que los formatos utilizados
        son públicos y pueden ser verificados por cualquier persona. Estos
        formatos rigen cómo se presenta una prueba pericial de un documento
        electrónico, y con el uso de esta herramienta es posible identificar su{" "}
        <strong>autenticidad</strong>, <strong>integridad</strong> y{" "}
        <strong>validez</strong> de forma rápida y sencilla.
      </p>
      <p className="mt-3">
        Arrastra una prueba en formato JSON generada por Plumaa ID para
        verificarla.
      </p>
      <Dropzone
        onChange={setFiles}
        className="w-full py-[140px] mt-6"
        accept="application/json"
        cta="Arrastra aquí una prueba .json"
      />
      <Button onClick={setTestProof} className="w-full mt-5" variant="outline">
        Ver ejemplo
      </Button>
    </>
  );
};

export default ProofReader;
